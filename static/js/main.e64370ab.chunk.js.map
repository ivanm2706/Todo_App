{"version":3,"sources":["types/LinksPath.ts","components/Footer.tsx","components/Header.tsx","components/TodoInfo.tsx","components/TodoList.tsx","App.tsx","helper/filterTodos.ts","helper/useLocaleStorage.ts","index.tsx"],"names":["LinksPath","filterLinks","title","to","All","Active","Completed","Footer","todos","setTodos","amountCompletedTodos","className","data-cy","length","map","isActive","classNames","replace","some","todo","completed","type","onClick","completedTodos","filter","remove","id","Header","useState","value","setValue","input","useRef","useEffect","current","focus","onSubmit","e","preventDefault","trim","add","Date","now","ref","placeholder","onChange","target","TodoInfo","changeTitle","setChangeTitle","newTitle","setNewTitle","inputNewTitle","checked","currentTodo","stopPropagation","toggle","onDoubleClick","onKeyUp","key","onBlur","TodoList","isCompletedTodo","allCompletedTodos","htmlFor","App","items","filterBy","JSON","parse","window","localStorage","getItem","setData","data","setItem","stringify","makeChange","idTodos","filterTodos","includes","find","useLocaleStorage","useMemo","reduce","acc","curr","location","useLocation","pathname","visibleTodos","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e64370ab.chunk.js","sourcesContent":["// eslint-disable-next-line\nexport enum LinksPath {\n  All = '/',\n  Active = '/active',\n  Completed = '/completed',\n}\n","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport { NavLink } from 'react-router-dom';\nimport { MakeChange } from '../types/MakeChange';\nimport { Todo } from '../types/Todo';\nimport { LinksPath } from '../types/LinksPath';\n\ntype Props = {\n  todos: Todo[],\n  setTodos: MakeChange,\n  amountCompletedTodos: number,\n};\n\nconst filterLinks = [{\n  title: 'All',\n  to: LinksPath.All,\n}, {\n  title: 'Active',\n  to: LinksPath.Active,\n}, {\n  title: 'Completed',\n  to: LinksPath.Completed,\n}];\n\nexport const Footer: FC<Props> = ({\n  todos,\n  setTodos,\n  amountCompletedTodos,\n}) => {\n  const hendlerRemoveAll = () => {\n    const completedTodos = todos\n      .filter(todo => todo.completed === true);\n\n    setTodos.remove(completedTodos.map(({ id }) => id));\n  };\n\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__todoCount\" data-cy=\"todosCounter\">\n        <strong>{todos.length - amountCompletedTodos}</strong>\n        {' items left'}\n      </p>\n\n      <ul className=\"filters\" data-cy=\"todosFilter\">\n        {filterLinks.map(({ title, to }) => (\n          <li key={title} className=\"filters__list\">\n            <NavLink\n              to={to}\n              className={({ isActive }) => classNames(\n                'filters__link',\n                { 'filters__link--selected': isActive },\n              )}\n              replace\n            >\n              {title}\n            </NavLink>\n          </li>\n        ))}\n      </ul>\n\n      {todos.some(todo => todo.completed === true) && (\n        <button\n          type=\"button\"\n          className=\"button button--clearCompleted\"\n          onClick={hendlerRemoveAll}\n        >\n          Clear completed\n        </button>\n      )}\n    </footer>\n  );\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { MakeChange } from '../types/MakeChange';\n\ntype Props = {\n  setTodos: MakeChange,\n};\n\nexport const Header: React.FC<Props> = ({\n  setTodos,\n}) => {\n  const [value, setValue] = useState('');\n  const input = useRef<HTMLInputElement | null>(null);\n\n  useEffect(() => {\n    input.current?.focus();\n  }, []);\n\n  const hendlerInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n  };\n\n  const hendlerForm = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (value.trim()) {\n      setTodos.add({\n        id: Date.now(),\n        completed: false,\n        title: value,\n      });\n    }\n\n    setValue('');\n  };\n\n  return (\n    <header>\n      <h1 className=\"todoapp__title\">todos</h1>\n\n      <form onSubmit={hendlerForm}>\n        <input\n          ref={input}\n          type=\"text\"\n          data-cy=\"createTodo\"\n          className=\"input input--newTodo\"\n          placeholder=\"What needs to be done?\"\n          value={value}\n          onChange={hendlerInput}\n        />\n      </form>\n    </header>\n  );\n};\n","import React, {\n  FC,\n  useRef,\n  useState,\n  useEffect,\n} from 'react';\nimport { MakeChange } from '../types/MakeChange';\nimport { Todo } from '../types/Todo';\n\ntype Props = {\n  todo: Todo,\n  setTodos: MakeChange,\n  changeTitle: number | null,\n  setChangeTitle: React.Dispatch<React.SetStateAction<number | null>>,\n};\n\nexport const TodoInfo: FC<Props> = ({\n  todo,\n  setTodos,\n  changeTitle,\n  setChangeTitle,\n}) => {\n  const [newTitle, setNewTitle] = useState(todo.title);\n  const inputNewTitle = useRef<HTMLInputElement | null>(null);\n  const hendlerRemove = (id: number) => {\n    setTodos.remove([id]);\n  };\n\n  const hendlerToggler = (currentTodo: Todo) => {\n    setTodos.toggle([{ ...currentTodo, completed: !todo.completed }]);\n  };\n\n  const hendlerDoubleClick = (id: number) => setChangeTitle(id);\n\n  const hendlerNewTitle = (\n    e: React.ChangeEvent<HTMLInputElement>,\n  ) => setNewTitle(e.target.value);\n\n  const hendlerKeyUp = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      if (!newTitle.trim()) {\n        setTodos.remove([todo.id]);\n        setChangeTitle(null);\n\n        return;\n      }\n\n      setTodos.toggle([{ ...todo, title: newTitle }]);\n      setChangeTitle(null);\n\n      return;\n    }\n\n    if (e.key === 'Escape') {\n      setNewTitle(todo.title);\n      setChangeTitle(null);\n    }\n  };\n\n  const hendlerOnBlur = () => {\n    setChangeTitle(null);\n  };\n\n  useEffect(() => inputNewTitle.current?.focus(), [changeTitle]);\n\n  return (\n    <>\n      <div className=\"todoList__view\">\n        <input\n          type=\"checkbox\"\n          className=\"input input--toggle todoList__toggle\"\n          checked={todo.completed}\n          onClick={(e) => {\n            e.stopPropagation();\n            hendlerToggler(todo);\n          }}\n        />\n        <p\n          className=\"todoList__toggleLabel\"\n          onDoubleClick={() => hendlerDoubleClick(todo.id)}\n        >\n          {todo.title}\n        </p>\n        {/* eslint-disable jsx-a11y/control-has-associated-label */}\n        <button\n          type=\"button\"\n          className=\"button button--destroy todoList__destroy\"\n          data-cy=\"deleteTodo\"\n          onClick={() => hendlerRemove(todo.id)}\n        />\n      </div>\n      <input\n        ref={inputNewTitle}\n        type=\"text\"\n        id=\"toggle-view\"\n        className=\"input input--edit todoList__edit\"\n        value={newTitle}\n        onChange={hendlerNewTitle}\n        onKeyUp={hendlerKeyUp}\n        onBlur={hendlerOnBlur}\n      />\n    </>\n  );\n};\n","import classNames from 'classnames';\nimport React, { FC, useState } from 'react';\nimport { MakeChange } from '../types/MakeChange';\nimport { Todo } from '../types/Todo';\nimport { TodoInfo } from './TodoInfo';\n\ntype Props = {\n  todos: Todo[],\n  setTodos: MakeChange,\n  isCompletedTodo: boolean,\n};\n\nexport const TodoList: FC<Props> = ({\n  todos,\n  setTodos,\n  isCompletedTodo,\n}) => {\n  const [changeTitle, setChangeTitle] = useState<number | null>(null);\n\n  const hendlerTogglerAll = () => {\n    let allCompletedTodos = todos\n      .filter(todo => todo.completed === false);\n\n    if (!allCompletedTodos.length) {\n      allCompletedTodos = [...todos];\n    }\n\n    setTodos.toggle(allCompletedTodos.map(todo => (\n      { ...todo, completed: !todo.completed }\n    )));\n  };\n\n  return (\n    <section className=\"mainTodos\">\n      <input\n        type=\"checkbox\"\n        id=\"toggle-all\"\n        className=\"input input--toggleAll mainTodos__toggleAll\"\n        data-cy=\"toggleAll\"\n        checked={isCompletedTodo}\n        onClick={hendlerTogglerAll}\n      />\n      {/* eslint-disable-next-line */}\n      <label\n        className=\"mainTodos__label\"\n        htmlFor=\"toggle-all\"\n      >\n        Mark all as complete\n      </label>\n\n      <ul className=\"todo-list * todoList\" data-cy=\"todosList\">\n        {todos.map(todo => (\n          <li\n            key={todo.id}\n            className={classNames(\n              'todoList__item',\n              { 'todoList__item--completed': todo.completed },\n              { 'todoList__item--editing': changeTitle === todo.id },\n            )}\n          >\n            <TodoInfo\n              todo={todo}\n              setTodos={setTodos}\n              setChangeTitle={setChangeTitle}\n              changeTitle={changeTitle}\n            />\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n};\n","/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React, { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Footer } from './components/Footer';\nimport { Header } from './components/Header';\nimport { TodoList } from './components/TodoList';\nimport { filterTodos } from './helper/filterTodos';\nimport { useLocaleStorage } from './helper/useLocaleStorage';\n\nexport const App: React.FC = () => {\n  const [todos, setTodos] = useLocaleStorage('todos');\n  const amountCompletedTodos = useMemo(() => {\n    return todos.reduce((acc, curr) => {\n      return curr.completed ? acc + 1 : acc;\n    }, 0);\n  }, [todos]);\n  const { pathname: location } = useLocation();\n  const isCompletedTodo = useMemo(() => {\n    return !todos.some(todo => todo.completed === false);\n  }, [todos]);\n\n  const visibleTodos = filterTodos(todos, location);\n\n  return (\n    <div className=\"todoapp\">\n      <Header\n        setTodos={setTodos}\n      />\n\n      {!todos.length || (\n        <>\n          <TodoList\n            isCompletedTodo={isCompletedTodo}\n            todos={visibleTodos}\n            setTodos={setTodos}\n          />\n          <Footer\n            todos={todos}\n            setTodos={setTodos}\n            amountCompletedTodos={amountCompletedTodos}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n","import { LinksPath } from '../types/LinksPath';\nimport { Todo } from '../types/Todo';\n\nexport const filterTodos = (items: Todo[], filterBy: string) => {\n  if (filterBy === LinksPath.All) {\n    return items;\n  }\n\n  return items.filter(({ completed }) => {\n    switch (filterBy) {\n      case LinksPath.Active:\n        return completed === false;\n\n      case LinksPath.Completed:\n        return completed === true;\n\n      default:\n        return false;\n    }\n  });\n};\n","import { useState } from 'react';\nimport { MakeChange } from '../types/MakeChange';\nimport { Todo } from '../types/Todo';\n\nexport const useLocaleStorage = (key: string): [Todo[], MakeChange] => {\n  const [value, setValue] = useState<Todo[]>(() => {\n    return JSON.parse(window.localStorage.getItem(key) || '[]');\n  });\n\n  const setData = (data: Todo[]) => {\n    setValue(data);\n    window.localStorage.setItem(key, JSON.stringify(data));\n  };\n\n  const makeChange = {\n    add(data: Todo) {\n      setData([...value, data]);\n    },\n\n    remove(idTodos: number[]) {\n      const filterTodos = value.filter(({ id }) => !idTodos.includes(id));\n\n      setData(filterTodos);\n    },\n\n    toggle(items: Todo[]) {\n      const filterTodos = value.map(todo => {\n        const item = items.find(({ id }) => id === todo.id);\n\n        if (item) {\n          return item;\n        }\n\n        return todo;\n      });\n\n      setData(filterTodos);\n    },\n  };\n\n  return [value, makeChange];\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport { App } from './App';\n\nimport './styles/index.scss';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}